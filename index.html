<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <title>Uniuse - Smart Digital Notes</title>
    <style>
    
/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', system-ui, sans-serif;
}

body {
    background: #f5f5f5;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Authentication Section Styles */
.auth-section {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
}

.auth-container {
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 400px;
    padding: 2rem;
    position: relative;
    overflow: hidden;
}

.logo-section {
    text-align: center;
    margin-bottom: 2rem;
}

.logo-section img {
    width: 120px;
    height: auto;
    margin-bottom: 1rem;
}

.logo-section h1 {
    color: #333;
    font-size: 2rem;
    font-weight: 600;
}

/* Form Styles */
.auth-form {
    transition: all 0.3s ease;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: #555;
    font-size: 0.9rem;
}

.form-group input {
    width: 100%;
    padding: 0.8rem;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
}

.form-group input:focus {
    border-color: #4a90e2;
    outline: none;
    box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.1);
}

.password-field {
    position: relative;
}

.password-toggle {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #666;
}

.btn-primary {
    width: 100%;
    padding: 0.8rem;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.3s ease;
}

.btn-primary:hover {
    background: #357abd;
}

.auth-links {
    margin-top: 1.5rem;
    text-align: center;
    font-size: 0.9rem;
}

.auth-links a,
.auth-links label {
    color: #4a90e2;
    text-decoration: none;
    cursor: pointer;
    margin: 0 0.5rem;
}

.auth-links a:hover,
.auth-links label:hover {
    text-decoration: underline;
}

/* Form Toggle Logic */
#formToggle:checked ~ #loginForm {
    display: none;
}

#formToggle:not(:checked) ~ #registerForm {
    display: none;
}

/* Responsive Design */
@media (max-width: 480px) {
    .auth-container {
        padding: 1.5rem;
    }

    .logo-section img {
        width: 100px;
    }

    .logo-section h1 {
        font-size: 1.75rem;
    }
}
/* Root Variables */
:root {
    --primary-color: #4a90e2;
    --secondary-color: #357abd;
    --background-color: #f8f9fa;
    --text-color: #333;
    --border-radius: 8px;
    --shadow: 0 2px 4px rgba(0,0,0,0.1);
    --transition: all 0.3s ease;
}

/* Main App Container */
.main-app {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: var(--background-color);
    position: relative;
}

/* Header Styles */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: white;
    box-shadow: var(--shadow);
    position: sticky;
    top: 0;
    z-index: 100;
}

header img {
    height: 40px;
    width: auto;
}

/* Profile Details */
details {
    position: relative;
}

details summary {
    list-style: none;
    cursor: pointer;
    padding: 0.75rem 1.5rem;
    border-radius: 20px;
    background: var(--background-color);
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

details[open] summary {
    background: var(--primary-color);
    color: white;
}

details > div {
    position: absolute;
    right: 0;
    top: calc(100% + 0.5rem);
    background: white;
    padding: 1.5rem;
    border-radius: var(--border-radius);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    min-width: 250px;
    z-index: 1000;
}

details img {
    border-radius: 50%;
    margin-bottom: 1rem;
}

details select {
    width: 100%;
    padding: 0.5rem;
    margin: 1rem 0;
    border-radius: var(--border-radius);
}

details button {
    width: 100%;
    padding: 0.75rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: var(--transition);
}

/* Navigation and Dropdowns */
nav {
    padding: 1rem;
    background: white;
    border-bottom: 1px solid #eee;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.create-dropdown, .books-dropdown {
    position: relative;
}

.create-trigger, .books-trigger {
    padding: 0.75rem 1.5rem;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: var(--transition);
    font-weight: 500;
}

.create-content, .books-content {
    position: absolute;
    top: 100%;
    left: 0;
    background: white;
    border-radius: var(--border-radius);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 1.5rem;
    z-index: 1000;
    min-width: 320px;
    max-width: 90vw;
}

/* Form Styles */
.create-form {
    padding: 1rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-color);
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: var(--border-radius);
    transition: var(--transition);
}

.color-picker-container {
    background: var(--background-color);
    padding: 1.5rem;
    border-radius: var(--border-radius);
    margin-top: 1.5rem;
}

/* Editor Styles */
.editor-dropdown {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    z-index: 1000;
}

#editor-button {
    width: 3.5rem;
    height: 3.5rem;
    border-radius: 50%;
    background: var(--primary-color);
    color: white;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
}

.editor-tools-dropdown {
    position: absolute;
    bottom: 100%;
    right: 0;
    background: white;
    border-radius: var(--border-radius);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 1rem;
    margin-bottom: 1rem;
}

/* Writing Areas */
.writing-area {
    background: white;
    border-radius: var(--border-radius);
    padding: 2rem;
    margin: 1rem;
    box-shadow: var(--shadow);
    height: calc(100vh - 200px);
    overflow-y: auto;
}

.writing-area textarea {
    width: 100%;
    height: 100%;
    border: none;
    resize: none;
    padding: 1rem;
    line-height: 1.6;
    font-size: 16px;
}

/* Nigerian Notebook Specific */
.nigerian-page {
    display: flex;
    background: white;
    margin: 1rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    height: calc(100vh - 200px);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .create-content, .books-content {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
    }
}

@media (max-width: 768px) {
    header {
        padding: 0.75rem;
    }

    nav {
        flex-direction: column;
    }

    .writing-area {
        margin: 0.5rem;
        padding: 1rem;
    }

    #editor-button {
        width: 3rem;
        height: 3rem;
        bottom: 1rem;
        right: 1rem;
    }
}

@media (max-width: 480px) {
    details > div {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
    }

    .editor-tools-dropdown {
        position: fixed;
        bottom: 5rem;
        right: 1rem;
        width: calc(100% - 2rem);
    }
}

/* Touch Device Optimizations */
@media (hover: none) {
    .create-trigger:active,
    .books-trigger:active,
    #editor-button:active {
        transform: scale(0.95);
    }
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
    :root {
        --background-color: #1a1a1a;
        --text-color: #ffffff;
    }

    .writing-area,
    .nigerian-page {
        background: #2d2d2d;
        color: white;
    }

    .writing-area textarea {
        background: #2d2d2d;
        color: white;
    }
}
/* Footer Styles */
footer {
    background: #2c3e50;
    color: white;
    padding: 3rem 1.5rem;
    margin-top: auto;
}

/* Partners Section */
.partners {
    margin-bottom: 2rem;
    padding: 1rem 0;
    background: rgba(255,255,255,0.1);
    border-radius: 8px;
}

.partners marquee {
    display: flex;
    align-items: center;
    gap: 2rem;
    padding: 1rem;
}

.partners img {
    vertical-align: middle;
}

/* About Sections */
details {
    margin-bottom: 1rem;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

details summary {
    padding: 1rem 0;
    cursor: pointer;
    font-weight: 500;
}

details article {
    padding: 1rem 0;
    line-height: 1.6;
}

/* Social Links */
.social-links {
    display: flex;
    gap: 1rem;
    margin: 2rem 0;
}

.social-links a {
    color: white;
    text-decoration: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    background: rgba(255,255,255,0.1);
    transition: background 0.3s ease;
}

/* Copyright */
.copyright {
    text-align: center;
    padding-top: 2rem;
    border-top: 1px solid rgba(255,255,255,0.1);
}

/* Responsive Design */
@media (max-width: 768px) {
    .feedback-trigger {
        left: 1rem;
        bottom: 1rem;
        padding: 0.75rem 1rem;
    }

    .stats-board {
        margin: 1rem;
        padding: 1rem;
    }

    footer {
        padding: 2rem 1rem;
    }
}

@media (max-width: 480px) {
    .feedback-content {
        width: 95%;
        padding: 1.5rem;
    }

    .partners marquee {
        flex-direction: column;
        gap: 1rem;
    }

    .social-links {
        flex-wrap: wrap;
    }
}
/* Stats Board */
.stats-board {
    padding: 2rem;
    background: white;
    border-radius: 12px;
    margin: 2rem auto;
    max-width: 800px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.1);
}

.stats-board table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}

.stats-board th, 
.stats-board td {
    padding: 1rem;
    text-align: center;
    border: 1px solid #eee;
}

.stats-board th {
    background: #f8f9fa;
    font-weight: 600;
}
/* Ad Banners */
.main-ad {
    width: 100%;
    max-width: 500px;
    margin: 2rem auto;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.small-ad {
    width: 100%;
    max-width: 250px;
    margin: 1rem auto;
    overflow: hidden;
    border-radius: 4px;
}

marquee {
    background: #f8f9fa;
}

marquee img, marquee video {
    object-fit: cover;
}
/* Feedback Button */
.feedback-trigger {
    position: fixed;
    left: 2rem;
    bottom: 2rem;
    padding: 1rem 1.5rem;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    z-index: 999;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: transform 0.3s ease;
}

/* Feedback Modal */
.feedback-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    z-index: 1000;
    animation: fadeIn 0.3s ease;
}

.feedback-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 2rem;
    border-radius: 12px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}

/* Rating Stars */
.stars {
    display: flex;
    gap: 0.5rem;
    margin: 1rem 0;
}

.fa-star {
    color: #ddd;
    cursor: pointer;
    transition: color 0.3s ease;
}

.fa-star.active {
    color: #FFD700;
}



    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

</head>
<body>

   <section id="authSection" class="auth-section">
    <div class="auth-container">
        <div class="logo-section">
           <img src="https://i.ibb.co/VmfbqLw/1-C31-C70-E-42-D0-4813-ADE1-42-D676659-CCA.png" alt="Uniuse Logo" class="logo">

         <h1> Uniuse</h1>
            </div>

        <!-- Toggle Control -->
        <input type="checkbox" id="formToggle" class="form-toggle-input" hidden>

        <!-- Login Form -->
        <form id="loginForm" class="auth-form">
            <h2>Login</h2>
            <div class="form-group">
                <label for="loginEmail">Email Address</label>
                <input type="email" id="loginEmail" required>
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <div class="password-field">
                    <input type="password" id="loginPassword" required>
                    <label class="password-toggle" for="showLoginPassword">
                        <input type="checkbox" id="showLoginPassword" hidden>
                        <i class="fas fa-eye"></i>
                    </label>
                </div>
            </div>
            <button type="submit" class="btn-primary">Login</button>
            <div class="auth-links">
                <a href="#" class="forgot-link">Forgot Password?</a>
                <label for="formToggle" class="toggle-link">New User? Create Account</label>
            </div>
        </form>

        <!-- Registration Form -->
        <form id="registerForm" class="auth-form">
            <h2>Sign Up</h2>
            <div class="form-group">
                <label for="registerName">Full Name</label>
                <input type="text" id="registerName" required>
            </div>
            <div class="form-group">
                <label for="registerEmail">Email Address</label>
                <input type="email" id="registerEmail" required>
            </div>
            <div class="form-group">
                <label for="registerPassword">Password</label>
                <div class="password-field">
                    <input type="password" id="registerPassword" required>
                    <label class="password-toggle" for="showRegisterPassword">
                        <input type="checkbox" id="showRegisterPassword" hidden>
                        <i class="fas fa-eye"></i>
                    </label>
                </div>
            </div>
            <button type="submit" class="btn-primary">Create Account</button>
            <div class="auth-links">
                <label for="formToggle" class="toggle-link">Already have an account? Login</label>
            </div>
        </form>
    </div>
</section>



    <!-- Main Application Section -->
    <section id="mainApp" class="main-app hidden">
          <!-- Header -->
        <header>
            <img src="uniuse-logo.png" alt="Uniuse Logo" width="150" height="50">

            <!-- Profile Trigger -->
            <details>
                <summary>Profile</summary>
                <div>
                    <img src="default-avatar.png" alt="Profile Picture" width="100" height="100">
                    <h3>User Name</h3>
                    <p>user@email.com</p>
                    <select>
                        <option value="😊">😊</option>
                        <option value="😎">😎</option>
                        <option value="🤓">🤓</option>
                        <option value="😇">😇</option>
                    </select>
                    <button>Close</button>
                </div>
            </details>
        </header>

        <!-- Menu Bar -->
        <nav>
            <div class="create-dropdown">
                <button class="create-trigger">Create</button>
                <div class="create-content" id="createContent">
                    <div class="create-form">
                        <form id="notebook-form">
                            <h3>Create New Notebook</h3>
                            <!-- Basic Information -->
                            <div class="form-group">
                                <label for="notebook-name">Notebook Name:</label>
                                <input type="text" id="notebook-name" name="notebook-name" required>
                            </div>

                            <div class="form-group">
                                <label for="page-count">Number of Pages:</label>
                                <input type="number" id="page-count" name="page-count" min="1" max="500" required>
                            </div>

                            <div class="form-group">
                                <label for="notebook-type">Notebook Type:</label>
                                <select id="notebook-type" name="notebook-type" required>
                                    <option value="">Select Type</option>
                                    <option value="pdf">PDF Format</option>
                                    <option value="nigerian">Nigerian Notebook</option>
                                </select>
                            </div>

                            <!-- Color Picker Section -->
                            <div class="color-picker-container">
                                <div class="form-group">
                                    <label for="cover-color">Cover Color:</label>
                                    <input type="color" id="cover-color" name="cover-color" value="#000000" class="color-picker">
                                </div>

                                <div class="gradient-toggle">
                                    <input type="checkbox" id="use-gradient" name="use-gradient">
                                    <label for="use-gradient">Use Gradient</label>
                                </div>

                                <div class="gradient-controls" id="gradient-controls">
                                    <div class="form-group">
                                        <input type="color" id="gradient-color-2" name="gradient-color-2" value="#ffffff" class="color-picker">
                                    </div>
                                    <div class="form-group">
                                        <select id="gradient-direction" name="gradient-direction">
                                            <option value="to right">Horizontal</option>
                                            <option value="to bottom">Vertical</option>
                                            <option value="to bottom right">Diagonal</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" class="submit-btn">Create Notebook</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="books-dropdown">
    <button class="books-trigger">Books</button>
    <div class="books-content" id="booksContent">
        <section id="books-page">
            <!-- Header -->
            <header>
                <button id="back-to-main">← Back</button>
                <div class="header-title">
                    <img src="books-icon.png" alt="Books Icon">
                    <h1>Books</h1>
                </div>
            </header>

            <!-- Search Bar -->
            <div class="search-section">
                <input type="search" placeholder="Search books by name...">
            </div>

            <!-- Ad Banner -->
            <div class="ad-banner">
                <marquee width="480" height="60">
                    <img src="ad1.jpg" alt="Advertisement" width="480" height="60">
                    <img src="ad2.jpg" alt="Advertisement" width="480" height="60">
                </marquee>
            </div>

            <!-- Book Shelf Container -->
            <div class="book-shelf">
                <!-- First Row -->
                <div class="book-row">
                    
                </div>

                <!-- Second Row -->
                <div class="book-row">
                    <!-- Additional book cards can be added here -->
                </div
                
                    
                
                
                </div>
            </div>
        </section>

        <!-- Individual Book View Page -->
        <section id="book-content">
            <!-- Book Header -->
            <header>
                <button id="back-to-books">← Back to Books</button>
                <h1>Book Name</h1>
            </header>

            <!-- Book Menu Bar -->
            <nav class="book-menu">
                
                <label>
                    Autosave
                    <input type="checkbox">
                </label>
            </nav>

            <!-- Floating Editor Button -->
            <div class="editor-dropdown">
    <button id="editor-button" draggable="true">
        <i class="fas fa-edit"></i> Editor
    </button>
    
    <div class="editor-tools-dropdown" id="editorTools">
        <table class="tools-table">
            <tr>
                <td class="tool-cell" title="Font Size">
                    <i class="fas fa-text-height"></i>
                </td>
                <td class="tool-cell" title="Bold">
                    <i class="fas fa-bold"></i>
                </td>
                <td class="tool-cell" title="Underline">
                    <i class="fas fa-underline"></i>
                </td>
                <td class="tool-cell" title="Text Style">
                    <i class="fas fa-font"></i>
                </td>
            </tr>
            <tr>
                <td class="tool-cell" title="Add Table">
                    <i class="fas fa-table"></i>
                </td>
                <td class="tool-cell" title="Undo">
                    <i class="fas fa-undo"></i>
                </td>
                <td class="tool-cell" title="Redo">
                    <i class="fas fa-redo"></i>
                </td>
                <td class="tool-cell" title="Add Image">
                    <i class="fas fa-image"></i>
                </td>
            </tr>
            <tr>
                <td class="tool-cell" title="List">
                    <i class="fas fa-list"></i>
                </td>
                <td class="tool-cell" title="Link">
                    <i class="fas fa-link"></i>
                </td>
                <td class="tool-cell" title="Code">
                    <i class="fas fa-code"></i>
                </td>
                <td class="tool-cell" title="Settings">
                    <i class="fas fa-cog"></i>
                </td>
            </tr>
        </table>
    </div>
</div>


            <!-- PDF Format Content -->

            <div id="pdf-format">
                <input type="text" placeholder="Page Topic">
                <nav class="page-navigation">
                    <button>← Previous</button>
                    <span>Page 1 of 100</span>
                    <button>Next →</button>
                </nav>
                <div class="writing-area">
                <textarea placeholder="Enter your text here..."></textarea>
            </div>
            </div>


            <!-- Nigerian Notebook Format -->

            <div id="nigerian-format">
                <input type="text" placeholder="Page Topic">
                <nav class="page-navigation">
                    <button>← Previous</button>
                    <span>Page 1 of 100</span>
                    <button>Next →</button>
                </nav>
                <div class="nigerian-page">
                    <!-- Left side holes with editor tools -->
                   <div class="holes">
    <div class="editor-tool" title="Font Size">
        <i class="fas fa-text-height"></i>
    </div>
    <div class="editor-tool" title="Bold">
        <i class="fas fa-bold"></i>
    </div>
    <div class="editor-tool" title="Underline">
        <i class="fas fa-underline"></i>
    </div>
    <div class="editor-tool" title="Text Style">
        <i class="fas fa-font"></i>
    </div>
    <div class="editor-tool" title="Add Table">
        <i class="fas fa-table"></i>
    </div>
    <div class="editor-tool" title="Undo">
        <i class="fas fa-undo"></i>
    </div>
    <div class="editor-tool" title="Redo">
        <i class="fas fa-redo"></i>
    </div>
    <div class="editor-tool" title="Add Image">
        <i class="fas fa-image"></i>
    </div>
    <div class="editor-tool" title="List">
        <i class="fas fa-list"></i>
    </div>
    <div class="editor-tool" title="Link">
        <i class="fas fa-link"></i>
    </div>
    <div class="editor-tool" title="Code">
        <i class="fas fa-code"></i>
    </div>
    <div class="editor-tool" title="Settings">
        <i class="fas fa-cog"></i>
    </div>
</div>


                    <!-- Main writing area -->
                    <div class="writing-area">
                        <div class="margin-line"></div>
                        <div class="text-lines">
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div><div class="line"></div>
                            <div class="line"></div>
                            <!-- Repeat for all 24 lines -->
                        </div>
                        <textarea class="notebook-text" rows="24"></textarea>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>


            
          <!-- Add this to your HTML where you want the feedback button to appear -->
<button id="feedbackBtn" class="feedback-trigger">
    <i class="fas fa-comments"></i> Feedback
</button>

<!-- Feedback Modal -->
<div id="feedbackModal" class="feedback-modal">
    <div class="feedback-content">
        <h2>Share Your Feedback</h2>
        <form id="feedbackForm">
            <div class="rating-container">
                <span>Rate your experience:</span>
                <div class="stars">
                    <i class="fas fa-star" data-rating="1"></i>
                    <i class="fas fa-star" data-rating="2"></i>
                    <i class="fas fa-star" data-rating="3"></i>
                    <i class="fas fa-star" data-rating="4"></i>
                    <i class="fas fa-star" data-rating="5"></i>
                </div>
            </div>
            <div class="feedback-type">
                <select required>
                    <option value="">Select Feedback Type</option>
                    <option value="bug"Problem  Report</option>
                    <option value="feature">Feature Request</option>
                    <option value="improvement">Improvement Suggestion</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <textarea placeholder="Tell us your thoughts..." required></textarea>
            <button type="submit">Submit Feedback</button>
            <button type="button" class="close-btn">Close</button>
        </form>
    </div>
</div>


        <!-- Main Ad Banner -->
        <section>
            <marquee scrolldelay="15000" width="500" height="70">
                <img src="ad1.jpg" alt="Advertisement 1" width="500" height="70">
                <img src="ad2.jpg" alt="Advertisement 2" width="500" height="70">
                <img src="ad3.jpg" alt="Advertisement 3" width="500" height="70">
                <video width="500" height="70" autoplay muted>
                    <source src="ad-video1.mp4" type="video/mp4">
                </video>
                <img src="ad4.jpg" alt="Advertisement 4" width="500" height="70">
                <img src="ad5.jpg" alt="Advertisement 5" width="500" height="70">
                <img src="ad6.jpg" alt="Advertisement 6" width="500" height="70">
                <video width="500" height="70" autoplay muted>
                    <source src="ad-video2.mp4" type="video/mp4">
                </video>
            </marquee>
        </section>

        <!-- Stats Board -->
        <section>
            <article>
                <h2>App Statistics</h2>
                <table border="1">
                    <tr>
                        <th>Books Created</th>
                        <th>Total Users</th>
                        <th>Feedback Count</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </table>
            </article>
        </section>

        <!-- Small Ad Banner -->
        <section>
            <marquee width="250" height="40">
                <img src="small-ad1.jpg" alt="Small Advertisement" width="250" height="40">
                <img src="small-ad2.jpg" alt="Small Advertisement" width="250" height="40">
            </marquee>
        </section>

        <!-- Footer -->
        <footer>
            <!-- Partners Section -->
            <section>
                <h3>Our Partners</h3>
                <marquee>
                    <img src="partner1-logo.png" alt="Partner 1" width="100" height="50">
                    <span>Partner 1 Name</span>
                    <img src="partner2-logo.png" alt="Partner 2" width="100" height="50">
                    <span>Partner 2 Name</span>
                    <img src="partner3-logo.png" alt="Partner 3" width="100" height="50">
                    <span>Partner 3 Name</span>
                </marquee>
            </section>

            <!-- About Sections -->
            <details>
                <summary>About Us</summary>
                <article>
                    <h3>About Us</h3>
                    <p>Welcome to Uniuse, a revolutionary app designed to bridge the gap between traditional note-taking and modern digital convenience. At Uniuse, we transform your handwritten or printed Nigerian-style notebook pages into organized, editable, and shareable digital notes with the power of AI and advanced text recognition.</p>
                    <p>Our mission is to enhance productivity by offering a seamless way to digitize, edit, and manage your notes while preserving the unique structure of Nigerian notebooks. Whether you're a student, professional, or creative, Uniuse empowers you to create, organize, and access your notes anywhere, anytime.</p>
                    <p>With features like real-time auto-save, intelligent text correction, and AI assistance, Uniuse is redefining how notes are captured, stored, and shared. Join us in creating a smarter, more efficient way to handle your ideas and information.</p>
                </article>
            </details>

            <details>
                <summary>About the CEO</summary>
                <article>
                    <h3>About the CEO</h3>
                    <p>Bashorun Idris is a visionary entrepreneur and a dedicated student at Lagos State University. As the founder and CEO of iSmart Digital Connect, a company registered with the Corporate Affairs Commission (CAC) in Nigeria, he is committed to driving innovation in the fintech, e-commerce, and digital solutions sectors.</p>
                    <p>With a passion for creating impactful and accessible technologies, Bashorun Idris leads projects like the Uniuse App, Bills and Mall, Hussview and Tap to Pay(which is under development), which aim to revolutionize how people interact with financial and digital platforms. His forward-thinking approach and commitment to excellence continue to shape the future of tech innovation in Nigeria and beyond.</p>
                </article>
            </details>

            <details>
                <summary>About the Company</summary>
                <article>
                    <h3>About the Company</h3>
                    <p>iSmart Digital Connect is a Nigerian-based technology company dedicated to transforming lives through innovative fintech, e-commerce, and digital solutions. Founded and registered with the Corporate Affairs Commission (CAC), the company focuses on creating accessible, user-friendly platforms tailored to meet the unique needs of Nigerians and beyond.</p>
                    <p>With flagship projects like Tap to Pay and the Uniuse App, iSmart Digital Connect combines cutting-edge technology with a deep understanding of local challenges to deliver practical and impactful solutions. The company is committed to fostering growth, innovation, and convenience in every product and service it offers.</p>
                </article>
            </details>

            <!-- Social Links -->
            <nav>
                <h4>Follow Us</h4>
                <a href="#">Facebook</a>
                <a href="#">Twitter</a>
                <a href="#">Instagram</a>
                <a href="#">LinkedIn</a>
            </nav>

            <p>&copy; 2025 Uniuse - All rights reserved</p>
        </footer>
         </section>
      <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>

    <script>
    // Initialize Firebase with your config
const firebaseConfig = {
    apiKey: "AIzaSyAK8T_ceUGR1B0ovxFLxPYs6HWQYewittw",
    authDomain: "uniuse.firebaseapp.com",
    projectId: "uniuse",
    storageBucket: "uniuse.firebasestorage.app",
    messagingSenderId: "132594569463",
    appId: "1:132594569463:web:93b3ab72b2a84e29c7c3f2",
    measurementId: "G-7ZCGXZ829S"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// DOM Elements
const loginForm = document.getElementById('loginForm');
const registerForm = document.getElementById('registerForm');
const authSection = document.getElementById('authSection');
const mainApp = document.getElementById('mainApp');

// Password Toggle Functionality
document.querySelectorAll('.password-toggle input[type="checkbox"]').forEach(toggle => {
    toggle.addEventListener('change', function() {
        const passwordField = this.closest('.password-field').querySelector('input[type="password"]');
        passwordField.type = this.checked ? 'text' : 'password';
    });
});

// Registration Handler
registerForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    try {
        const name = document.getElementById('registerName').value;
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;

        const userCredential = await auth.createUserWithEmailAndPassword(email, password);

        // Save additional user data
        await db.collection('users').doc(userCredential.user.uid).set({
            name: name,
            email: email,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        showMainApp();
    } catch (error) {
        alert(`Registration error: ${error.message}`);
    }
});

// Login Handler
loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    try {
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        await auth.signInWithEmailAndPassword(email, password);
        showMainApp();
    } catch (error) {
        alert(`Login error: ${error.message}`);
    }
});

// Auth State Observer
auth.onAuthStateChanged(user => {
    if (user) {
        showMainApp();
        loadUserData(user);
    } else {
        showAuth();
    }
});

// Forgot Password Handler
document.querySelector('.forgot-link').addEventListener('click', async (e) => {
    e.preventDefault();
    const email = prompt('Enter your email address:');

    if (email) {
        try {
            await auth.sendPasswordResetEmail(email);
            alert('Password reset email sent! Check your inbox.');
        } catch (error) {
            alert(`Error: ${error.message}`);
        }
    }
});

// Helper Functions
function showMainApp() {
    authSection.classList.add('hidden');
    mainApp.classList.remove('hidden');
}

function showAuth() {
    authSection.classList.remove('hidden');
    mainApp.classList.add('hidden');
}

async function loadUserData(user) {
    try {
        const doc = await db.collection('users').doc(user.uid).get();
        const userData = doc.data();

        // Update UI with user data
        const userName = document.querySelector('.main-app h3');
        const userEmail = document.querySelector('.main-app p');

        if (userName) userName.textContent = userData.name;
        if (userEmail) userEmail.textContent = userData.email;
    } catch (error) {
        console.error('Error loading user data:', error);
    }
}

// Logout Handler
window.logout = function() {
    auth.signOut().then(() => {
        showAuth();
    }).catch(error => {
        alert(`Logout error: ${error.message}`);
    });
};

 
            
            
            
            
// Navigation Controls
document.addEventListener('DOMContentLoaded', () => {
    const profileButton = document.querySelector('details');
    const createButton = document.querySelector('.create-trigger');
    const booksButton = document.querySelector('.books-trigger');

    // Profile Button
    profileButton.addEventListener('toggle', () => {
        if (profileButton.open) {
            loadProfile(auth.currentUser);
        }
    });

    // Create Button
    createButton.addEventListener('click', () => {
        const createContent = document.getElementById('createContent');
        createContent.style.display = createContent.style.display === 'block' ? 'none' : 'block';
    });

    // Books Button
    booksButton.addEventListener('click', () => {
        const booksContent = document.getElementById('booksContent');
        booksContent.style.display = booksContent.style.display === 'block' ? 'none' : 'block';
        if (booksContent.style.display === 'block') {
            loadNotebooks();
        }
    });
});

 // Firebase Auth State Observer
auth.onAuthStateChanged(user => {
    if (user) {
        loadProfile(user);
        loadNotebooks();
        initializeUI();
    }
});

// Profile Management
const profileDetails = document.querySelector('details');
const profileImage = profileDetails.querySelector('img');
const profileName = profileDetails.querySelector('h3');
const profileEmail = profileDetails.querySelector('p');
const emojiSelect = profileDetails.querySelector('select');
const closeButton = profileDetails.querySelector('button');

// File Input Setup
const fileInput = document.createElement('input');
fileInput.type = 'file';
fileInput.accept = 'image/*';
fileInput.style.display = 'none';
profileImage.parentElement.insertBefore(fileInput, profileImage.nextSibling);

// Profile Picture Upload
profileImage.style.cursor = 'pointer';
profileImage.addEventListener('click', () => fileInput.click());

fileInput.addEventListener('change', async (e) => {
    const file = e.target.files[0];
    if (file) {
        const storageRef = firebase.storage().ref();
        const fileRef = storageRef.child(`profilePictures/${auth.currentUser.uid}`);

        try {
            await fileInput.put(file);
            const url = await fileRef.getDownloadURL();
            await auth.currentUser.updateProfile({ photoURL: url });
            await db.collection('users').doc(auth.currentUser.uid).update({
                photoURL: url
            });
            profileImage.src = url;
            showNotification('Profile picture updated successfully!');
        } catch (error) {
            showNotification('Error uploading image: ' + error.message, 'error');
        }
    }
});

// Emoji Selection
emojiSelect.addEventListener('change', async () => {
    try {
        await db.collection('users').doc(auth.currentUser.uid).update({
            emoji: emojiSelect.value
        });
        showNotification('Emoji updated successfully!');
    } catch (error) {
        showNotification('Error updating emoji: ' + error.message, 'error');
    }
});

// Profile Loading
async function loadProfile(user) {
    const userDoc = await db.collection('users').doc(user.uid).get();
    const userData = userDoc.data();

    profileName.textContent = userData.name;
    profileEmail.textContent = userData.email;

    if (userData.photoURL) {
        profileImage.src = userData.photoURL;
    }

    if (userData.emoji) {
        emojiSelect.value = userData.emoji;
    }
}

// Notebook Creation
const notebookForm = document.getElementById('notebook-form');
const useGradientCheckbox = document.getElementById('use-gradient');
const gradientControls = document.getElementById('gradient-controls');
const bookshelf = document.querySelector('.book-shelf');

useGradientCheckbox.addEventListener('change', () => {
    gradientControls.style.display = useGradientCheckbox.checked ? 'block' : 'none';
});

notebookForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const notebookData = {
        name: document.getElementById('notebook-name').value,
        pageCount: parseInt(document.getElementById('page-count').value),
        type: document.getElementById('notebook-type').value,
        coverColor: document.getElementById('cover-color').value,
        useGradient: useGradientCheckbox.checked,
        gradientColor2: document.getElementById('gradient-color-2').value,
        gradientDirection: document.getElementById('gradient-direction').value,
        userId: auth.currentUser.uid,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
    };

    try {
        const docRef = await db.collection('notebooks').add(notebookData);
        createBookCard(notebookData, docRef.id);
        notebookForm.reset();
        document.getElementById('createContent').style.display = 'none';
        showNotification('Notebook created successfully!');
    } catch (error) {
        showNotification('Error creating notebook: ' + error.message, 'error');
    }
});

// Book Management
const searchInput = document.querySelector('.search-section input');
const backToMainBtn = document.getElementById('back-to-main');
const booksPage = document.getElementById('books-page');
const bookContent = document.getElementById('book-content');

async function loadNotebooks() {
    const notebooksSnapshot = await db.collection('notebooks')
        .where('userId', '==', auth.currentUser.uid)
        .orderBy('createdAt', 'desc')
        .get();

    bookshelf.querySelector('.book-row').innerHTML = '';
    notebooksSnapshot.forEach(doc => {
        createBookCard(doc.data(), doc.id);
    });
}

// Search Functionality
searchInput.addEventListener('input', async (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const notebooksSnapshot = await db.collection('notebooks')
        .where('userId', '==', auth.currentUser.uid)
        .get();

    bookshelf.querySelector('.book-row').innerHTML = '';
    notebooksSnapshot.forEach(doc => {
        const data = doc.data();
        if (data.name.toLowerCase().includes(searchTerm)) {
            createBookCard(data, doc.id);
        }
    });
});

// Navigation Handlers
backToMainBtn.addEventListener('click', () => {
    booksPage.style.display = 'block';
    bookContent.style.display = 'none';
});

document.getElementById('back-to-books').addEventListener('click', () => {
    bookContent.style.display = 'none';
    booksPage.style.display = 'block';
});

// Book Card Creation and Click Handler
function createBookCard(notebook, id) {
    const bookCard = document.createElement('a');
    bookCard.href = '#book-content';
    bookCard.className = 'book-link';
    bookCard.dataset.notebookId = id;

    const background = notebook.useGradient
        ? `linear-gradient(${notebook.gradientDirection}, ${notebook.coverColor}, ${notebook.gradientColor2})`
        : notebook.coverColor;

    bookCard.innerHTML = `
        <div class="book-card" style="background: ${background}">
            <h4>${notebook.name}</h4>
            <div class="book-details">
                <small>${notebook.pageCount} Pages</small>
                <small>${notebook.type}</small>
            </div>
        </div>
    `;

    const firstRow = bookshelf.querySelector('.book-row');
    firstRow.appendChild(bookCard);
}// Book Card Click Handler
document.addEventListener('click', async (e) => {
    const bookCard = e.target.closest('.book-link');
    if (!bookCard) return;

    const notebookId = bookCard.dataset.notebookId;
    const doc = await db.collection('notebooks').doc(notebookId).get();
    const notebookData = { id: notebookId, ...doc.data() };

    // Show book content section
    document.getElementById('books-page').style.display = 'none';
    const bookContent = document.getElementById('book-content');
    bookContent.style.display = 'block';

    // Update book header
    bookContent.querySelector('h1').textContent = notebookData.name;

    // Initialize appropriate format
    if (notebookData.type === 'pdf') {
        document.getElementById('pdf-format').style.display = 'block';
        document.getElementById('nigerian-format').style.display = 'none';
        initializeFormat(notebookData, 'pdf');
    } else {
        document.getElementById('pdf-format').style.display = 'none';
        document.getElementById('nigerian-format').style.display = 'block';
        initializeFormat(notebookData, 'nigerian');
    }
});
 

// Load notebook data from Firestore
async function loadNotebookData(notebookId) {
    const doc = await db.collection('notebooks').doc(notebookId).get();
    return { id: doc.id, ...doc.data() };
}

// Format-specific editor initialization
function initializePDFFormat(notebook) {
    const pdfFormat = document.getElementById('pdf-format');
    const editorDropdown = document.querySelector('.editor-dropdown');
    const pageCount = notebook.pageCount;
    let currentPage = 1;
    let pageContents = new Map(); // Store page contents

    // Show floating editor only for PDF format
    editorDropdown.style.display = 'block';

    // Initialize editor tools
    initializeEditorTools();

    // Set up navigation with content preservation
    const prevButton = pdfFormat.querySelector('button:first-of-type');
    const nextButton = pdfFormat.querySelector('button:last-of-type');
    const pageSpan = pdfFormat.querySelector('span');
    const textarea = pdfFormat.querySelector('textarea');

    function updatePageDisplay() {
        pageSpan.textContent = `Page ${currentPage} of ${pageCount}`;
    }

    // Save current page content before navigation
    function saveCurrentPage() {
        pageContents.set(currentPage, textarea.value);
    }

    // Load saved page content
    function loadSavedPage() {
        textarea.value = pageContents.get(currentPage) || '';
    }

    prevButton.onclick = () => {
        if (currentPage > 1) {
            saveCurrentPage();
            currentPage--;
            updatePageDisplay();
            loadSavedPage();
            loadPageContent(notebook.id, currentPage);
        }
    };

    nextButton.onclick = () => {
        if (currentPage < pageCount) {
            saveCurrentPage();
            currentPage++;
            updatePageDisplay();
            loadSavedPage();
            loadPageContent(notebook.id, currentPage);
        }
    };

    updatePageDisplay();
    loadPageContent(notebook.id, currentPage);
}


    // Modify the initializePDFFormat and initializeNigerianFormat functions to include proper page content management

function initializeFormat(notebook, formatType) {
    const format = document.getElementById(`${formatType}-format`);
    const pageCount = notebook.pageCount;
    let currentPage = 1;

    // Initialize page navigation
    const prevButton = format.querySelector('button:first-of-type');
    const nextButton = format.querySelector('button:last-of-type');
    const pageSpan = format.querySelector('span');
    const textarea = format.querySelector('textarea') || format.querySelector('.notebook-text');

    // Update page display
    function updatePageDisplay() {
        pageSpan.textContent = `Page ${currentPage} of ${pageCount}`;
    }

    // Save page content to Firestore
    async function savePageContent() {
        try {
            await db.collection('notebooks')
                .doc(notebook.id)
                .collection('pages')
                .doc(currentPage.toString())
                .set({
                    content: textarea.value,
                    lastModified: firebase.firestore.FieldValue.serverTimestamp()
                });
        } catch (error) {
            console.error('Error saving page content:', error);
        }
    }

    // Load page content from Firestore
    async function loadPageContent() {
        try {
            const pageDoc = await db.collection('notebooks')
                .doc(notebook.id)
                .collection('pages')
                .doc(currentPage.toString())
                .get();

            textarea.value = pageDoc.exists ? pageDoc.data().content : '';
        } catch (error) {
            console.error('Error loading page content:', error);
        }
    }

    // Navigation handlers with content saving
    prevButton.onclick = async () => {
        if (currentPage > 1) {
            await savePageContent(); // Save current page before navigation
            currentPage--;
            updatePageDisplay();
            await loadPageContent();
        }
    };

    nextButton.onclick = async () => {
        if (currentPage < pageCount) {
            await savePageContent(); // Save current page before navigation
            currentPage++;
            updatePageDisplay();
            await loadPageContent();
        }
    };

    // Initialize autosave
    const autosaveCheckbox = document.querySelector('.book-menu input[type="checkbox"]');
    let autosaveInterval;

    autosaveCheckbox.onchange = () => {
        if (autosaveCheckbox.checked) {
            autosaveInterval = setInterval(savePageContent, 30000); // Autosave every 30 seconds
        } else {
            clearInterval(autosaveInterval);
        }
    };

    // Save on content change (debounced)
    textarea.oninput = debounce(() => {
        if (autosaveCheckbox.checked) {
            savePageContent();
        }
    }, 1000);

    // Initial setup
    updatePageDisplay();
    loadPageContent();
}

function initializeNigerianTools() {
    const tools = document.querySelectorAll('.holes .editor-tool');
    const writingArea = document.querySelector('.nigerian-page .writing-area');

    tools.forEach(tool => {
        tool.addEventListener('click', () => {
            const command = getCommandFromTool(tool);
            executeCommand(command, writingArea);
        });
    });
}

function getCommandFromTool(tool) {
    const title = tool.getAttribute('title');
    switch (title) {
        case 'Font Size':
            return { command: 'fontSize', value: prompt('Enter font size (1-7):', '3') };
        case 'Bold':
            return { command: 'bold' };
        case 'Underline':
            return { command: 'underline' };
        case 'Text Style':
            return { command: 'fontName', value: prompt('Enter font name:', 'Arial') };
        case 'Add Table':
            return { command: 'insertTable' };
        case 'Undo':
            return { command: 'undo' };
        case 'Redo':
            return { command: 'redo' };
        case 'Add Image':
            return { command: 'insertImage' };
        case 'List':
            return { command: 'insertUnorderedList' };
        case 'Link':
            return { command: 'createLink', value: prompt('Enter URL:', 'http://') };
        case 'Code':
            return { command: 'formatBlock', value: 'pre' };
        default:
            return null;
    }
}

function executeCommand(commandObj, target) {
    if (!commandObj) return;

    if (commandObj.command === 'insertTable') {
        const rows = prompt('Enter number of rows:', '3');
        const cols = prompt('Enter number of columns:', '3');
        insertTable(target, rows, cols);
        return;
    }

    if (commandObj.command === 'insertImage') {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = 'image/*';
        input.onchange = (e) => handleImageUpload(e, target);
        input.click();
        return;
    }

    document.execCommand(commandObj.command, false, commandObj.value);
}

function insertTable(target, rows, cols) {
    const table = document.createElement('table');
    table.border = '1';

    for (let i = 0; i < rows; i++) {
        const row = table.insertRow();
        for (let j = 0; j < cols; j++) {
            const cell = row.insertCell();
            cell.contentEditable = true;
            cell.textContent = `Cell ${i}-${j}`;
        }
    }

    target.appendChild(table);
}

async function handleImageUpload(event, target) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
            const img = document.createElement('img');
            img.src = e.target.result;
            img.style.maxWidth = '100%';
            target.appendChild(img);
        };
        reader.readAsDataURL(file);
    }
}

// Debounce helper function
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}
// Back button handlers
document.getElementById('back-to-books').addEventListener('click', () => {
    // Hide book content and show books page
    document.getElementById('book-content').style.display = 'none';
    document.getElementById('books-page').style.display = 'block';
    
    // Clear any active editor state
    const editorDropdown = document.querySelector('.editor-dropdown');
    if (editorDropdown) {
        editorDropdown.style.display = 'none';
    }
    
    // Reset formats display
    const pdfFormat = document.getElementById('pdf-format');
    const nigerianFormat = document.getElementById('nigerian-format');
    if (pdfFormat) pdfFormat.style.display = 'none';
    if (nigerianFormat) nigerianFormat.style.display = 'none';
    
    // Clear any autosave intervals
    const autosaveCheckbox = document.querySelector('.book-menu input[type="checkbox"]');
    if (autosaveCheckbox) {
        autosaveCheckbox.checked = false;
        autosaveCheckbox.dispatchEvent(new Event('change'));
    }
});

document.getElementById('back-to-main').addEventListener('click', () => {
    // Hide books page content
    document.getElementById('booksContent').style.display = 'none';
    
    // Reset any active states in the books section
    document.getElementById('books-page').style.display = 'block';
    document.getElementById('book-content').style.display = 'none';
    
    // Clear search input
    const searchInput = document.querySelector('.search-section input');
    if (searchInput) {
        searchInput.value = '';
    }
});

// Global Stats Tracking System
function initializeGlobalStats() {
    const statsTable = document.querySelector('article table');
    const [booksCell, usersCell, feedbackCell] = statsTable.querySelectorAll('td');

    // Track Total Books Across All Users
    db.collection('notebooks')
        .where('createdAt', '!=', null) // Count all valid notebooks
        .onSnapshot(snapshot => {
            const totalBooks = snapshot.size;
            booksCell.textContent = totalBooks;
            // Add animation for number changes
            booksCell.classList.add('number-change');
            setTimeout(() => booksCell.classList.remove('number-change'), 500);
        });

    // Track Total Registered Users
    db.collection('users')
        .onSnapshot(snapshot => {
            const totalUsers = snapshot.size;
            usersCell.textContent = totalUsers;
            usersCell.classList.add('number-change');
            setTimeout(() => usersCell.classList.remove('number-change'), 500);
        });

    // Track Total User Feedback
    db.collection('feedback')
        .onSnapshot(snapshot => {
            const totalFeedback = snapshot.size;
            feedbackCell.textContent = totalFeedback;
            feedbackCell.classList.add('number-change');
            setTimeout(() => feedbackCell.classList.remove('number-change'), 500);
        });
}

// Add this CSS for number change animation
const style = document.createElement('style');
style.textContent = `
    .number-change {
        animation: numberPulse 0.5s ease-out;
    }
    
    @keyframes numberPulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }
`;
document.head.appendChild(style);

// Initialize stats when app loads
document.addEventListener('DOMContentLoaded', initializeGlobalStats);
// Feedback System Implementation
class FeedbackSystem {
    constructor() {
        this.modal = document.getElementById('feedbackModal');
        this.form = document.getElementById('feedbackForm');
        this.trigger = document.getElementById('feedbackBtn');
        this.stars = document.querySelectorAll('.stars i');
        this.currentRating = 0;
        
        this.initializeEventListeners();
    }

    initializeEventListeners() {
        // Open modal
        this.trigger.addEventListener('click', () => this.openModal());

        // Close modal
        document.querySelector('.close-btn').addEventListener('click', () => this.closeModal());

        // Star rating
        this.stars.forEach(star => {
            star.addEventListener('mouseover', () => this.highlightStars(star.dataset.rating));
            star.addEventListener('mouseleave', () => this.highlightStars(this.currentRating));
            star.addEventListener('click', () => this.setRating(star.dataset.rating));
        });

        // Form submission
        this.form.addEventListener('submit', (e) => this.handleSubmit(e));
    }

    openModal() {
        this.modal.style.display = 'block';
    }

    closeModal() {
        this.modal.style.display = 'none';
        this.resetForm();
    }

    highlightStars(rating) {
        this.stars.forEach(star => {
            star.classList.toggle('active', star.dataset.rating <= rating);
        });
    }

    setRating(rating) {
        this.currentRating = rating;
        this.highlightStars(rating);
    }

    resetForm() {
        this.form.reset();
        this.currentRating = 0;
        this.highlightStars(0);
    }

    async handleSubmit(e) {
        e.preventDefault();

        if (!auth.currentUser) {
            alert('Please login to submit feedback');
            return;
        }

        const feedbackData = {
            userId: auth.currentUser.uid,
            userEmail: auth.currentUser.email,
            rating: this.currentRating,
            type: this.form.querySelector('select').value,
            message: this.form.querySelector('textarea').value,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        };

        try {
            await db.collection('feedback').add(feedbackData);
            this.showSuccessMessage();
            this.closeModal();
        } catch (error) {
            this.showErrorMessage(error);
        }
    }

    showSuccessMessage() {
        const notification = document.createElement('div');
        notification.className = 'feedback-notification success';
        notification.textContent = 'Thank you for your feedback!';
        document.body.appendChild(notification);
        
        setTimeout(() => notification.remove(), 3000);
    }

    showErrorMessage(error) {
        const notification = document.createElement('div');
        notification.className = 'feedback-notification error';
        notification.textContent = `Error: ${error.message}`;
        document.body.appendChild(notification);
        
        setTimeout(() => notification.remove(), 3000);
    }
}

// Initialize feedback system
document.addEventListener('DOMContentLoaded', () => {
    const feedbackSystem = new FeedbackSystem();
});




// Notification System
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    document.body.appendChild(notification);

    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// Initialize UI
function initializeUI() {
    // Set initial states
    gradientControls.style.display = 'none';
    bookContent.style.display = 'none';
    booksPage.style.display = 'block';
}


    </script>    
</body>
</html>
